import{aX as Fe,g as ye,l as Q,e as Ye,aY as Xe,f as ee,i as xe,aZ as qe,aa as Ge,a4 as _,a_ as Te,r as A,w as Y,a$ as te,aw as we,b0 as Ze,ax as V,_ as Je,k as Ve,b1 as Qe,a1 as et,c as y,u as Ce,aN as tt,b2 as ot,b3 as at,b4 as nt,b5 as st,b6 as lt,b7 as it,a6 as rt,aO as Se,a5 as ut,b8 as ct,n as C,o as m,ac as b,N as oe,B as T,y as x,t,q as W,p as E,v as R,x as j,E as H,b9 as Ee,C as dt,aB as pt,H as ft,ba as vt,K as U,s as Ie,aD as ze,z as mt}from"./id-B6nzwgpI.js";import{m as ht}from"./typescript-Bp3YSIOJ.js";import{U as ae,I as Ne,C as Pe}from"./event-BB_Ol6Sd.js";import{u as bt}from"./index-ng22Bdpy.js";const gt=()=>Fe&&/firefox/i.test(window.navigator.userAgent);let w;const yt={height:"0",visibility:"hidden",overflow:gt()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},xt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function wt(n){const r=window.getComputedStyle(n),l=r.getPropertyValue("box-sizing"),o=Number.parseFloat(r.getPropertyValue("padding-bottom"))+Number.parseFloat(r.getPropertyValue("padding-top")),u=Number.parseFloat(r.getPropertyValue("border-bottom-width"))+Number.parseFloat(r.getPropertyValue("border-top-width"));return{contextStyle:xt.map(c=>[c,r.getPropertyValue(c)]),paddingSize:o,borderSize:u,boxSizing:l}}function ke(n,r=1,l){var o;w||(w=document.createElement("textarea"),document.body.appendChild(w));const{paddingSize:u,borderSize:p,boxSizing:c,contextStyle:s}=wt(n);s.forEach(([h,I])=>w==null?void 0:w.style.setProperty(h,I)),Object.entries(yt).forEach(([h,I])=>w==null?void 0:w.style.setProperty(h,I,"important")),w.value=n.value||n.placeholder||"";let d=w.scrollHeight;const g={};c==="border-box"?d=d+p:c==="content-box"&&(d=d-u),w.value="";const v=w.scrollHeight-u;if(ye(r)){let h=v*r;c==="border-box"&&(h=h+u+p),d=Math.max(h,d),g.minHeight=`${h}px`}if(ye(l)){let h=v*l;c==="border-box"&&(h=h+u+p),d=Math.min(h,d)}return g.height=`${d}px`,(o=w.parentNode)==null||o.removeChild(w),w=void 0,g}const Ct=Ye({id:{type:String,default:void 0},size:qe,disabled:Boolean,modelValue:{type:ee([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:ee([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:xe},prefixIcon:{type:xe},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:ee([Object,Array,String]),default:()=>ht({})},autofocus:Boolean,rows:{type:Number,default:2},...Xe(["ariaLabel"])}),St={[ae]:n=>Q(n),input:n=>Q(n),change:n=>Q(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,mouseleave:n=>n instanceof MouseEvent,mouseenter:n=>n instanceof MouseEvent,keydown:n=>n instanceof Event,compositionstart:n=>n instanceof CompositionEvent,compositionupdate:n=>n instanceof CompositionEvent,compositionend:n=>n instanceof CompositionEvent};function Et(n,{beforeFocus:r,afterFocus:l,beforeBlur:o,afterBlur:u}={}){const p=Ge(),{emit:c}=p,s=_(),d=Te(),g=A(!1),v=f=>{we(r)&&r(f)||g.value||(g.value=!0,c("focus",f),l==null||l())},h=f=>{var a;we(o)&&o(f)||f.relatedTarget&&((a=s.value)!=null&&a.contains(f.relatedTarget))||(g.value=!1,c("blur",f),u==null||u())},I=f=>{var a,N;(a=s.value)!=null&&a.contains(document.activeElement)&&s.value!==document.activeElement||Ze(f.target)||d.value||(N=n.value)==null||N.focus()};return Y([s,d],([f,a])=>{f&&(a?f.removeAttribute("tabindex"):f.setAttribute("tabindex","-1"))}),te(s,"focus",v,!0),te(s,"blur",h,!0),te(s,"click",I,!0),{isFocused:g,wrapperRef:s,handleFocus:v,handleBlur:h}}const It=n=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(n);function zt({afterComposition:n,emit:r}){const l=A(!1),o=s=>{r==null||r("compositionstart",s),l.value=!0},u=s=>{var d;r==null||r("compositionupdate",s);const g=(d=s.target)==null?void 0:d.value,v=g[g.length-1]||"";l.value=!It(v)},p=s=>{r==null||r("compositionend",s),l.value&&(l.value=!1,V(()=>n(s)))};return{isComposing:l,handleComposition:s=>{s.type==="compositionend"?p(s):u(s)},handleCompositionStart:o,handleCompositionUpdate:u,handleCompositionEnd:p}}function Nt(n){let r;function l(){if(n.value==null)return;const{selectionStart:u,selectionEnd:p,value:c}=n.value;if(u==null||p==null)return;const s=c.slice(0,Math.max(0,u)),d=c.slice(Math.max(0,p));r={selectionStart:u,selectionEnd:p,value:c,beforeTxt:s,afterTxt:d}}function o(){if(n.value==null||r==null)return;const{value:u}=n.value,{beforeTxt:p,afterTxt:c,selectionStart:s}=r;if(p==null||c==null||s==null)return;let d=u.length;if(u.endsWith(c))d=u.length-c.length;else if(u.startsWith(p))d=p.length;else{const g=p[s-1],v=u.indexOf(g,s-1);v!==-1&&(d=v+1)}n.value.setSelectionRange(d,d)}return[l,o]}const Pt="ElInput",kt=Ve({name:Pt,inheritAttrs:!1}),Ft=Ve({...kt,props:Ct,emits:St,setup(n,{expose:r,emit:l}){const o=n,u=Qe(),p=bt(),c=et(),s=y(()=>[o.type==="textarea"?N.b():a.b(),a.m(I.value),a.is("disabled",f.value),a.is("exceed",Ae.value),{[a.b("group")]:c.prepend||c.append,[a.m("prefix")]:c.prefix||o.prefixIcon,[a.m("suffix")]:c.suffix||o.suffixIcon||o.clearable||o.showPassword,[a.bm("suffix","password-clear")]:K.value&&G.value,[a.b("hidden")]:o.type==="hidden"},u.class]),d=y(()=>[a.e("wrapper"),a.is("focus",q.value)]),{form:g,formItem:v}=ot(),{inputId:h}=at(o,{formItemContext:v}),I=tt(),f=Te(),a=Ce("input"),N=Ce("textarea"),$=_(),S=_(),X=A(!1),L=A(!1),ne=A(),D=_(o.inputStyle),P=y(()=>$.value||S.value),{wrapperRef:Be,isFocused:q,handleFocus:Me,handleBlur:Oe}=Et(P,{beforeFocus(){return f.value},afterBlur(){var e;o.validateEvent&&((e=v==null?void 0:v.validate)==null||e.call(v,"blur").catch(i=>Se()))}}),se=y(()=>{var e;return(e=g==null?void 0:g.statusIcon)!=null?e:!1}),B=y(()=>(v==null?void 0:v.validateState)||""),le=y(()=>B.value&&nt[B.value]),Re=y(()=>L.value?st:lt),He=y(()=>[u.style]),ie=y(()=>[o.inputStyle,D.value,{resize:o.resize}]),z=y(()=>it(o.modelValue)?"":String(o.modelValue)),K=y(()=>o.clearable&&!f.value&&!o.readonly&&!!z.value&&(q.value||X.value)),G=y(()=>o.showPassword&&!f.value&&!!z.value),k=y(()=>o.showWordLimit&&!!o.maxlength&&(o.type==="text"||o.type==="textarea")&&!f.value&&!o.readonly&&!o.showPassword),Z=y(()=>z.value.length),Ae=y(()=>!!k.value&&Z.value>Number(o.maxlength)),$e=y(()=>!!c.suffix||!!o.suffixIcon||K.value||o.showPassword||k.value||!!B.value&&se.value),[re,ue]=Nt($);rt(S,e=>{if(Le(),!k.value||o.resize!=="both")return;const i=e[0],{width:F}=i.contentRect;ne.value={right:`calc(100% - ${F+15+6}px)`}});const M=()=>{const{type:e,autosize:i}=o;if(!(!Fe||e!=="textarea"||!S.value))if(i){const F=ze(i)?i.minRows:void 0,be=ze(i)?i.maxRows:void 0,ge=ke(S.value,F,be);D.value={overflowY:"hidden",...ge},V(()=>{S.value.offsetHeight,D.value=ge})}else D.value={minHeight:ke(S.value).minHeight}},Le=(e=>{let i=!1;return()=>{var F;if(i||!o.autosize)return;((F=S.value)==null?void 0:F.offsetParent)===null||(e(),i=!0)}})(M),O=()=>{const e=P.value,i=o.formatter?o.formatter(z.value):z.value;!e||e.value===i||(e.value=i)},J=async e=>{re();let{value:i}=e.target;if(o.formatter&&o.parser&&(i=o.parser(i)),!de.value){if(i===z.value){O();return}l(ae,i),l(Ne,i),await V(),O(),ue()}},ce=e=>{let{value:i}=e.target;o.formatter&&o.parser&&(i=o.parser(i)),l(Pe,i)},{isComposing:de,handleCompositionStart:pe,handleCompositionUpdate:fe,handleCompositionEnd:ve}=zt({emit:l,afterComposition:J}),De=()=>{re(),L.value=!L.value,setTimeout(ue)},Ke=()=>{var e;return(e=P.value)==null?void 0:e.focus()},We=()=>{var e;return(e=P.value)==null?void 0:e.blur()},je=e=>{X.value=!1,l("mouseleave",e)},Ue=e=>{X.value=!0,l("mouseenter",e)},me=e=>{l("keydown",e)},_e=()=>{var e;(e=P.value)==null||e.select()},he=()=>{l(ae,""),l(Pe,""),l("clear"),l(Ne,"")};return Y(()=>o.modelValue,()=>{var e;V(()=>M()),o.validateEvent&&((e=v==null?void 0:v.validate)==null||e.call(v,"change").catch(i=>Se()))}),Y(z,()=>O()),Y(()=>o.type,async()=>{await V(),O(),M()}),ut(()=>{!o.formatter&&o.parser,O(),V(M)}),r({input:$,textarea:S,ref:P,textareaStyle:ie,autosize:ct(o,"autosize"),isComposing:de,focus:Ke,blur:We,select:_e,clear:he,resizeTextarea:M}),(e,i)=>(m(),C("div",{class:x([t(s),{[t(a).bm("group","append")]:e.$slots.append,[t(a).bm("group","prepend")]:e.$slots.prepend}]),style:Ie(t(He)),onMouseenter:Ue,onMouseleave:je},[b(" input "),e.type!=="textarea"?(m(),C(oe,{key:0},[b(" prepend slot "),e.$slots.prepend?(m(),C("div",{key:0,class:x(t(a).be("group","prepend"))},[W(e.$slots,"prepend")],2)):b("v-if",!0),T("div",{ref_key:"wrapperRef",ref:Be,class:x(t(d))},[b(" prefix slot "),e.$slots.prefix||e.prefixIcon?(m(),C("span",{key:0,class:x(t(a).e("prefix"))},[T("span",{class:x(t(a).e("prefix-inner"))},[W(e.$slots,"prefix"),e.prefixIcon?(m(),E(t(H),{key:0,class:x(t(a).e("icon"))},{default:R(()=>[(m(),E(j(e.prefixIcon)))]),_:1},8,["class"])):b("v-if",!0)],2)],2)):b("v-if",!0),T("input",Ee({id:t(h),ref_key:"input",ref:$,class:t(a).e("inner")},t(p),{minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?L.value?"text":"password":e.type,disabled:t(f),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,onCompositionstart:t(pe),onCompositionupdate:t(fe),onCompositionend:t(ve),onInput:J,onChange:ce,onKeydown:me}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","onCompositionstart","onCompositionupdate","onCompositionend"]),b(" suffix slot "),t($e)?(m(),C("span",{key:1,class:x(t(a).e("suffix"))},[T("span",{class:x(t(a).e("suffix-inner"))},[!t(K)||!t(G)||!t(k)?(m(),C(oe,{key:0},[W(e.$slots,"suffix"),e.suffixIcon?(m(),E(t(H),{key:0,class:x(t(a).e("icon"))},{default:R(()=>[(m(),E(j(e.suffixIcon)))]),_:1},8,["class"])):b("v-if",!0)],64)):b("v-if",!0),t(K)?(m(),E(t(H),{key:1,class:x([t(a).e("icon"),t(a).e("clear")]),onMousedown:ft(t(vt),["prevent"]),onClick:he},{default:R(()=>[dt(t(pt))]),_:1},8,["class","onMousedown"])):b("v-if",!0),t(G)?(m(),E(t(H),{key:2,class:x([t(a).e("icon"),t(a).e("password")]),onClick:De},{default:R(()=>[(m(),E(j(t(Re))))]),_:1},8,["class"])):b("v-if",!0),t(k)?(m(),C("span",{key:3,class:x(t(a).e("count"))},[T("span",{class:x(t(a).e("count-inner"))},U(t(Z))+" / "+U(e.maxlength),3)],2)):b("v-if",!0),t(B)&&t(le)&&t(se)?(m(),E(t(H),{key:4,class:x([t(a).e("icon"),t(a).e("validateIcon"),t(a).is("loading",t(B)==="validating")])},{default:R(()=>[(m(),E(j(t(le))))]),_:1},8,["class"])):b("v-if",!0)],2)],2)):b("v-if",!0)],2),b(" append slot "),e.$slots.append?(m(),C("div",{key:1,class:x(t(a).be("group","append"))},[W(e.$slots,"append")],2)):b("v-if",!0)],64)):(m(),C(oe,{key:1},[b(" textarea "),T("textarea",Ee({id:t(h),ref_key:"textarea",ref:S,class:[t(N).e("inner"),t(a).is("focus",t(q))]},t(p),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:t(f),readonly:e.readonly,autocomplete:e.autocomplete,style:t(ie),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:t(pe),onCompositionupdate:t(fe),onCompositionend:t(ve),onInput:J,onFocus:t(Me),onBlur:t(Oe),onChange:ce,onKeydown:me}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),t(k)?(m(),C("span",{key:0,style:Ie(ne.value),class:x(t(a).e("count"))},U(t(Z))+" / "+U(e.maxlength),7)):b("v-if",!0)],64))],38))}});var Tt=Je(Ft,[["__file","input.vue"]]);const Ht=mt(Tt);export{Ht as E,Et as a,zt as u};
