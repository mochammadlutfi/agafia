import{A as ia,r as y,a as na,U as sa,p as k,o as d,v as e,B as l,C as a,ac as _,O as ra,t as B,G as Y,J as n,K as s,n as f,D as oa,F as da,am as V}from"./id-Cr8V6t1X.js";import{_ as ma}from"./SingleFileUpload-BZUDtZzG.js";import{h as ca}from"./moment-D15uM1gO.js";import{E as ua}from"./index-BtGLfKkr.js";import{E as fa}from"./index-Dul2G-l6.js";import{E as pa,a as ga}from"./index-BAZgQQBy.js";import{E as ha}from"./index-yBxktac0.js";import{E as ka,a as ba}from"./index-CT_R_Abb.js";import{E as _a}from"./index-47Gz9gnE.js";import{E as va}from"./index-DcFwMWiv.js";import{E as ya,a as wa}from"./index-CBHLq98-.js";import{E as Sa}from"./index-xlrtmhen.js";import{E as Da}from"./index-DDayC8m2.js";import{E as ja}from"./index-tWq12LAA.js";import{E as j}from"./index-CgMgMsvk.js";import"./index-Dl373e-q.js";import"./typescript-Bp3YSIOJ.js";import"./event-BB_Ol6Sd.js";import"./index-CiTp9Ql6.js";import"./vnode-CzLQwVSd.js";import"./index-CCbbBko3.js";import"./scroll-tt70BtCB.js";import"./_Uint8Array-Bxcm0ZBW.js";import"./_initCloneObject-KuTjguNH.js";import"./index-CJ3TjzBC.js";import"./index-cvh5LgNC.js";import"./index-He-E5LR5.js";import"./validator-7KSO9w5A.js";const c=t=>(oa("data-v-7259b149"),t=t(),da(),t),Ea={class:"align-middle border-2 border-bottom border-primary d-flex justify-content-between mb-4 py-2"},Ca=c(()=>l("span",{class:"fw-bold fs-lg"},"Detail Lamaran",-1)),Ma=c(()=>l("i",{class:"fa fa-arrow-left me-2"},null,-1)),La=c(()=>l("i",{class:"fa fa-times me-2"},null,-1)),Va={class:"job-info-content"},Ta={class:"job-details"},Ia={class:"job-title"},Pa={class:"job-meta"},Aa={class:"meta-item"},Ua=c(()=>l("i",{class:"fa fa-building text-primary me-2"},null,-1)),xa={class:"meta-item"},Fa=c(()=>l("i",{class:"fa fa-map-marker-alt text-success me-2"},null,-1)),Ba={class:"meta-item"},Ya=c(()=>l("i",{class:"fa fa-calendar text-info me-2"},null,-1)),Ka={class:"job-status"},Na={class:"card-header"},za=c(()=>l("h3",null,[l("i",{class:"fa fa-tasks me-2"}),n(" Progress Lamaran ")],-1)),Ra={class:"progress-percentage"},qa={class:"steps-container"},Oa={class:"current-step-details mt-4"},Ga=c(()=>l("div",{class:"fs-4"},[l("i",{class:"fa fa-info-circle me-2"}),n(" Informasi Lamaran ")],-1)),Ha=c(()=>l("i",{class:"fa fa-download me-2"},null,-1)),Ja=c(()=>l("div",{class:"fs-4"},[l("i",{class:"fa fa-calendar me-2"}),n(" Jadwal Interview ")],-1)),$a={class:"interview-list"},Qa={class:"interview-item"},Wa={class:"interview-header"},Xa={class:"interview-details"},Za=c(()=>l("strong",null,"Tanggal:",-1)),ae=c(()=>l("strong",null,"Lokasi:",-1)),ee={key:0},te=c(()=>l("strong",null,"Catatan:",-1)),le=c(()=>l("div",{class:"fs-4"},[l("i",{class:"fa fa-calendar me-2"}),n(" Medical Check Up ")],-1)),ie={key:0},ne={key:0},se=c(()=>l("i",{class:"fa fa-file-pdf-o"},null,-1)),re=c(()=>l("div",{class:"fs-4"},[l("i",{class:"fa fa-briefcase me-2"}),n(" Detail Pekerjaan ")],-1)),oe=c(()=>l("h3",null,[l("i",{class:"fa fa-clipboard-list me-2"}),n(" Langkah Selanjutnya ")],-1)),de={class:"next-actions"},me={key:0,class:"action-item"},ce={key:1,class:"action-item"},ue={key:2,class:"action-item"},fe={key:3,class:"action-item"},pe={key:4,class:"action-item"},ge={key:5,class:"action-item"},he={key:6,class:"action-item"},ke={key:7,class:"action-item"},be=c(()=>l("i",{class:"fa fa-search me-2"},null,-1)),_e={class:"dialog-footer"},ve={__name:"Show",props:{lamaran:Object,progress:Object},setup(t){const p=t,w=y(!1);y(!1);const E=y(!1);y(!1);const C=y();y();const u=na({lamaran_id:p.lamaran.id,tanggal:"",nama:"",hasil:"",file:null,catatan:"",status:"pending"}),K={tanggal:[{required:!0,message:"Tanggal medical wajib diisi",trigger:"blur"}],nama:[{required:!0,message:"Nama Faskes wajib diisi",trigger:"blur"}],file:[{required:!0,message:"File wajib diupload",trigger:"change"}],hasil:[{required:!0,message:"Hasil wajib diisi",trigger:"blur"}]},N={pending:"Menunggu Review",diterima:"Diterima",ditolak:"Ditolak",interview:"Interview",medical:"Medical Check",pelatihan:"Pelatihan",siap:"Siap Berangkat",selesai:"Selesai"},z={pending:"warning",diterima:"success",ditolak:"danger",interview:"primary",medical:"info",pelatihan:"",siap:"success",selesai:"success"},T=r=>N[r]||r,I=r=>z[r]||"",P=r=>new Date(r).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),A=r=>new Date(r).toLocaleString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),R=r=>r?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r):"-",U=()=>({pending:0,diterima:1,interview:1,medical:2,pelatihan:3,siap:4,selesai:5,ditolak:0})[p.lamaran.status]||0,q=()=>p.lamaran.status==="ditolak"?"error":p.lamaran.status==="selesai"?"success":"process",O=()=>({pending:"Tahap Verifikasi",diterima:"Persiapan Interview",interview:"Proses Interview",medical:"Medical Check Up",pelatihan:"Program Pelatihan",siap:"Upload Dokumen Kelengkapan",selesai:"Proses Selesai",ditolak:"Lamaran Ditolak"})[p.lamaran.status]||"Status Tidak Diketahui",G=r=>{if(r)return ca(String(r)).format("DD MMM YYYY")},H=r=>{switch(r){case"pending":return"warning";case"valid":return"success";default:return"danger"}},J=()=>({pending:"Lamaran Anda sedang dalam tahap verifikasi. Mohon bersabar menunggu.",diterima:"Selamat! Lamaran Anda diterima. Kami akan menghubungi untuk jadwal interview.",interview:"Anda sedang dalam tahap interview. Pastikan persiapan Anda optimal.",medical:"Lakukan pemeriksaan kesehatan di fasilitas yang telah ditentukan.",pelatihan:"Ikuti program pelatihan sesuai jadwal yang telah diberikan.",siap:"Upload dokumen kelengkapan untuk proses keberangkatan.",selesai:"Selamat! Semua tahap telah selesai. Anda siap untuk penempatan kerja.",ditolak:"Lamaran tidak dapat diproses lebih lanjut. Silakan coba lamar posisi lain."})[p.lamaran.status]||"Tidak ada deskripsi tersedia.",$=()=>({pending:"info",diterima:"success",interview:"warning",medical:"info",pelatihan:"warning",siap:"info",selesai:"success",ditolak:"error"})[p.lamaran.status]||"info",Q=async()=>{try{await ja.confirm("Apakah Anda yakin ingin membatalkan lamaran ini?","Konfirmasi Pembatalan",{confirmButtonText:"Ya, Batalkan",cancelButtonText:"Tidak",type:"warning"}),V.post(route("user.lamaran.cancel",p.lamaran.id),{},{onSuccess:()=>{j.success("Lamaran berhasil dibatalkan"),V.visit(route("user.lamaran.index"))},onError:()=>{j.error("Gagal membatalkan lamaran")}})}catch{}},W=async()=>{C.value&&await C.value.validate(r=>{if(r){E.value=!0;try{u.lamaran_id=p.lamaran.id,axios.post(route("user.lamaran.medical"),u,{headers:{"Content-Type":"multipart/form-data"}}),j.success("Medical check up berhasil dijadwalkan"),w.value=!1,V.visit(route("user.lamaran.show",p.lamaran.id),{preserveState:!1,preserveScroll:!0})}catch(m){console.error("Error scheduling medical:",m),j.error("Gagal menjadwalkan medical check up")}finally{E.value=!1}}})};return(r,m)=>{const h=ra,D=fa,b=ua,v=ga,X=pa,g=ha,o=ba,M=ka,Z=_a,aa=Sa,S=wa,L=Da,ea=ya,ta=va,la=sa("user-layout");return d(),k(la,null,{default:e(()=>[l("div",Ea,[Ca,l("div",null,[a(h,{tag:B(Y),href:r.route("user.lamaran.index"),type:"default"},{default:e(()=>[Ma,n(" Kembali ")]),_:1},8,["tag","href"]),t.lamaran.status==="pending"?(d(),k(h,{key:0,onClick:Q,type:"danger",plain:""},{default:e(()=>[La,n(" Batalkan Lamaran ")]),_:1})):_("",!0)])]),a(b,{class:"job-info-card mb-4"},{default:e(()=>{var i,x,F;return[l("div",Va,[l("div",Ta,[l("h2",Ia,s((i=t.lamaran.lowongan)==null?void 0:i.posisi),1),l("div",Pa,[l("div",Aa,[Ua,l("span",null,s((x=t.lamaran.lowongan)==null?void 0:x.perusahaan),1)]),l("div",xa,[Fa,l("span",null,s((F=t.lamaran.lowongan)==null?void 0:F.lokasi),1)]),l("div",Ba,[Ya,l("span",null,"Dilamar pada "+s(P(t.lamaran.tanggal_lamaran)),1)])])]),l("div",Ka,[a(D,{type:I(t.lamaran.status),size:"large",class:"status-tag"},{default:e(()=>[n(s(T(t.lamaran.status)),1)]),_:1},8,["type"])])])]}),_:1}),a(b,{class:"progress-card mb-4"},{header:e(()=>[l("div",Na,[za,l("span",Ra,s(t.progress.percentage)+"%",1)])]),default:e(()=>[l("div",qa,[a(X,{active:U(),"process-status":q(),direction:"horizontal","align-center":""},{default:e(()=>[a(v,{title:"Verifikasi",description:"Lamaran sedang diverifikasi"}),a(v,{title:"Interview",description:"Proses wawancara dan test psikologi"}),a(v,{title:"Medical Check",description:"Pemeriksaan kesehatan"}),a(v,{title:"Training",description:"Pelatihan dan orientasi"}),a(v,{title:"Upload Dokumen",description:"Kelengkapan dokumen keberangkatan"}),a(v,{title:"Selesai",description:"Siap untuk penempatan kerja"})]),_:1},8,["active","process-status"])]),l("div",Oa,[a(g,{title:O(),description:J(),type:$(),"show-icon":"",closable:!1},null,8,["title","description","type"])])]),_:1}),a(b,{class:"mb-4 rounded"},{header:e(()=>[Ga]),default:e(()=>[a(M,{column:1,border:""},{default:e(()=>[a(o,{label:"ID Lamaran"},{default:e(()=>[n(" #"+s(t.lamaran.id),1)]),_:1}),a(o,{label:"Tanggal Lamaran"},{default:e(()=>[n(s(P(t.lamaran.tanggal_lamaran)),1)]),_:1}),a(o,{label:"Status"},{default:e(()=>[a(D,{type:I(t.lamaran.status)},{default:e(()=>[n(s(T(t.lamaran.status)),1)]),_:1},8,["type"])]),_:1}),a(o,{label:"Terakhir Diperbarui"},{default:e(()=>[n(s(A(t.lamaran.updated_at)),1)]),_:1}),t.lamaran.cv_file?(d(),k(o,{key:0,label:"CV"},{default:e(()=>[a(h,{tag:"a",href:"/storage/"+t.lamaran.cv_file,target:"_blank",type:"primary",size:"small"},{default:e(()=>[Ha,n(" Download CV ")]),_:1},8,["href"])]),_:1})):_("",!0),t.lamaran.catatan?(d(),k(o,{key:1,label:"Catatan"},{default:e(()=>[n(s(t.lamaran.catatan),1)]),_:1})):_("",!0)]),_:1})]),_:1}),t.lamaran.interview?(d(),k(b,{key:0,class:"mb-4 rounded"},{header:e(()=>[Ja]),default:e(()=>[l("div",$a,[l("div",Qa,[l("div",Wa,[l("h4",null,"Interview #"+s(t.lamaran.interview.id),1),a(D,{type:t.lamaran.interview.status==="selesai"?"success":"warning",size:"small"},{default:e(()=>[n(s(t.lamaran.interview.status==="selesai"?"Selesai":"Terjadwal"),1)]),_:1},8,["type"])]),l("div",Xa,[l("p",null,[Za,n(" "+s(A(t.lamaran.interview.tanggal)),1)]),l("p",null,[ae,n(" "+s(t.lamaran.interview.lokasi||"Online"),1)]),t.lamaran.interview.catatan?(d(),f("p",ee,[te,n(" "+s(t.lamaran.interview.catatan),1)])):_("",!0)])])])]),_:1})):_("",!0),U()>0?(d(),k(b,{key:1,class:"mb-4 rounded"},{header:e(()=>[le]),default:e(()=>[t.lamaran.medical?(d(),f("div",ie,[a(M,{column:2,border:"",direction:"horizontal"},{default:e(()=>[a(o,{label:"Nama Fasilitas Kesehatan"},{default:e(()=>[n(s(t.lamaran.medical.nama),1)]),_:1}),a(o,{label:"Tanggal Pengecekan"},{default:e(()=>[n(s(G(t.lamaran.medical.tanggal)),1)]),_:1}),a(o,{label:"Hasil"},{default:e(()=>[n(s(t.lamaran.medical.hasil),1)]),_:1}),a(o,{label:"Dokumen File"},{default:e(()=>[t.lamaran.medical.file?(d(),k(h,{key:1,tag:"a",href:"/uploads/"+t.lamaran.medical.file,target:"_blank",type:"primary",size:"small"},{default:e(()=>[se,n(" Lihat ")]),_:1},8,["href"])):(d(),f("span",ne,"-"))]),_:1}),a(o,{label:"Status"},{default:e(()=>[a(D,{type:H(t.lamaran.medical.status),size:"small"},{default:e(()=>[n(s(t.lamaran.medical.status_label),1)]),_:1},8,["type"])]),_:1}),a(o,{label:"Catatan",span:2,"label-position":"top"},{default:e(()=>[n(s(t.lamaran.medical.catatan),1)]),_:1})]),_:1})])):(d(),k(Z,{key:1},{default:e(()=>[a(h,{onClick:m[0]||(m[0]=i=>w.value=!0),type:"primary"},{default:e(()=>[n(" Upload Medical Checkup ")]),_:1})]),_:1}))]),_:1})):_("",!0),a(b,{class:"mb-4 rounded"},{header:e(()=>[re]),default:e(()=>[a(M,{column:1,border:""},{default:e(()=>[a(o,{label:"Posisi"},{default:e(()=>{var i;return[n(s((i=t.lamaran.lowongan)==null?void 0:i.posisi),1)]}),_:1}),a(o,{label:"Perusahaan"},{default:e(()=>{var i;return[n(s((i=t.lamaran.lowongan)==null?void 0:i.perusahaan),1)]}),_:1}),a(o,{label:"Lokasi"},{default:e(()=>{var i;return[n(s((i=t.lamaran.lowongan)==null?void 0:i.lokasi),1)]}),_:1}),a(o,{label:"Negara Tujuan"},{default:e(()=>{var i;return[n(s(((i=t.lamaran.lowongan)==null?void 0:i.negara_tujuan)||"-"),1)]}),_:1}),a(o,{label:"Gaji"},{default:e(()=>{var i;return[n(s(R((i=t.lamaran.lowongan)==null?void 0:i.gaji)),1)]}),_:1}),a(o,{label:"Skill Required"},{default:e(()=>{var i;return[n(s(((i=t.lamaran.lowongan)==null?void 0:i.skill)||"-"),1)]}),_:1}),a(o,{label:"Kuota"},{default:e(()=>{var i;return[n(s((i=t.lamaran.lowongan)==null?void 0:i.kuota)+" Posisi ",1)]}),_:1})]),_:1})]),_:1}),a(b,null,{header:e(()=>[oe]),default:e(()=>[l("div",de,[t.lamaran.status==="pending"?(d(),f("div",me,[a(g,{title:"Menunggu Verifikasi",description:"Lamaran Anda sedang diverifikasi. Anda akan dihubungi jika lolos tahap ini.",type:"info",closable:!1})])):t.lamaran.status==="diterima"?(d(),f("div",ce,[a(g,{title:"Persiapkan Interview",description:"Lamaran Anda diterima! Silakan persiapkan diri untuk tahap interview. Tim Kami akan menghubungi Anda segera.",type:"success",closable:!1})])):t.lamaran.status==="interview"?(d(),f("div",ue,[a(g,{title:"Tahap Interview",description:"Pastikan Anda hadir sesuai jadwal interview yang telah ditentukan.",type:"warning",closable:!1})])):t.lamaran.status==="medical"?(d(),f("div",fe,[a(g,{title:"Medical Check Up",description:"Lakukan pemeriksaan kesehatan di klinik yang telah ditentukan.",type:"info",closable:!1})])):t.lamaran.status==="pelatihan"?(d(),f("div",pe,[a(g,{title:"Pelatihan",description:"Ikuti program pelatihan dan orientasi sesuai jadwal yang diberikan.",type:"warning",closable:!1})])):t.lamaran.status==="siap"?(d(),f("div",ge,[a(g,{title:"Upload Dokumen",description:"Upload dokumen kelengkapan untuk keberangkatan.",type:"info",closable:!1})])):t.lamaran.status==="selesai"?(d(),f("div",he,[a(g,{title:"Selamat!",description:"Proses lamaran telah selesai. Anda siap untuk penempatan kerja.",type:"success",closable:!1})])):t.lamaran.status==="ditolak"?(d(),f("div",ke,[a(g,{title:"Lamaran Ditolak",description:"Maaf, lamaran Anda tidak dapat diproses lebih lanjut. Jangan menyerah, coba lamar posisi lain yang sesuai.",type:"error",closable:!1}),a(h,{tag:B(Y),href:r.route("lowongan"),type:"primary",class:"mt-3"},{default:e(()=>[be,n(" Cari Lowongan Lain ")]),_:1},8,["tag","href"])])):_("",!0)])]),_:1}),a(ta,{modelValue:w.value,"onUpdate:modelValue":m[7]||(m[7]=i=>w.value=i),title:"Medical Check Up",width:"600px","before-close":r.handleMedicalModalClose},{footer:e(()=>[l("span",_e,[a(h,{onClick:m[6]||(m[6]=i=>w.value=!1)},{default:e(()=>[n("Batal")]),_:1}),a(h,{type:"info",onClick:W,loading:E.value},{default:e(()=>[n(" Simpan ")]),_:1},8,["loading"])])]),default:e(()=>[a(ea,{model:u,rules:K,ref_key:"medicalFormRef",ref:C,"label-position":"top","label-width":"150px"},{default:e(()=>[a(S,{label:"Tanggal Medical",prop:"tanggal"},{default:e(()=>[a(aa,{modelValue:u.tanggal,"onUpdate:modelValue":m[1]||(m[1]=i=>u.tanggal=i),type:"date",placeholder:"Pilih tanggal",format:"DD/MM/YYYY","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),a(S,{label:"Nama Fasilitas Kesehatan",prop:"nama"},{default:e(()=>[a(L,{modelValue:u.nama,"onUpdate:modelValue":m[2]||(m[2]=i=>u.nama=i),placeholder:"Nama Fasilitas Kesehatan (misal:Rumah Sakit Bunga, dll)"},null,8,["modelValue"])]),_:1}),a(S,{label:"Upload File",prop:"file"},{default:e(()=>[a(ma,{modelValue:u.file,"onUpdate:modelValue":m[3]||(m[3]=i=>u.file=i)},null,8,["modelValue"])]),_:1}),a(S,{label:"Hasil",prop:"hasil"},{default:e(()=>[a(L,{modelValue:u.hasil,"onUpdate:modelValue":m[4]||(m[4]=i=>u.hasil=i),placeholder:"Hasil medical check"},null,8,["modelValue"])]),_:1}),a(S,{label:"Catatan"},{default:e(()=>[a(L,{modelValue:u.catatan,"onUpdate:modelValue":m[5]||(m[5]=i=>u.catatan=i),type:"textarea",rows:3,placeholder:"Catatan tambahan (opsional)"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","before-close"])]),_:1})}}},$e=ia(ve,[["__scopeId","data-v-7259b149"]]);export{$e as default};
