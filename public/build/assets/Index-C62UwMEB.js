import{r as m,aC as la,a as Va,an as Da,a5 as Ya,U as Ea,p as $,o as f,v as e,B as s,ad as ta,C as a,I as xa,O as Ma,J as p,E as Pa,t as i,bD as Sa,L as Ta,M as Ca,n as V,K as g,G as Ua,H as z,ac as Y,N as Fa,ah as Ba,am as oa}from"./id-C9hYMH1B.js";import{h as Ia}from"./moment-D15uM1gO.js";import{_ as La}from"./SelectLamaran-PL-v-94B.js";import{_ as Na}from"./SelectProgram-CSHZPKgP.js";import{a as ja,E as Oa}from"./index-BeNpYn1C.js";import{E as Aa,a as $a}from"./index-B7oIPsZq.js";import{E as za}from"./index-wNIjKzA9.js";import{E as Ga,a as Ra,b as Ha}from"./index--er-YjEa.js";import{E as Ka}from"./index-DpPGiUdG.js";import{E as Ja}from"./index-ZMuYLrAD.js";import{v as qa}from"./directive-BsyuVYtP.js";import{E as Qa}from"./index-lsY82Nw0.js";import{E as Wa,a as Xa}from"./index-DVyup1uO.js";import{E as Za}from"./index-Cim0JZIT.js";import{E as ae}from"./index-taKYsTq-.js";import{E as ee}from"./index-DosL4iqp.js";import{E as le}from"./index-DbSZ3Hba.js";import{E as S}from"./index-Cp4QcoMp.js";import"./typescript-Bp3YSIOJ.js";import"./index-GOrWjhdZ.js";import"./_Uint8Array-DpVHxJNR.js";import"./event-BB_Ol6Sd.js";import"./scroll-Do2KWamR.js";import"./_baseIteratee-DSxqpu-w.js";import"./vnode-C8DSHsEw.js";import"./index-Cgih6hI8.js";import"./_initCloneObject-iXJsdRzn.js";import"./isArrayLikeObject-CsAwkISA.js";import"./index-CyWwbtSv.js";import"./index-B8Y3CyFA.js";import"./validator-KIENhd6v.js";const te={class:"content"},oe={class:"content-heading d-flex justify-content-between align-items-center"},ne=s("span",null,"Peserta Training",-1),re={class:"space-x-1"},se=s("i",{class:"fa fa-download me-1"},null,-1),ie=s("i",{class:"fa fa-file-pdf-o me-2"},null,-1),de=s("i",{class:"si si-plus me-1"},null,-1),ue={class:"block rounded bordered"},me={class:"block-content py-3"},_e=s("span",null,[s("i",{class:"fa fa-search"})],-1),pe={class:"block-content p-0"},ge=s("i",{class:"fa-solid fa-ellipsis"},null,-1),fe=s("i",{class:"si fa-fw si-eye"},null,-1),ce=s("i",{class:"si fa-fw si-note"},null,-1),he=s("i",{class:"si fa-fw si-trash"},null,-1),ve={class:"block-content py-2"},be={class:"my-auto text-xs"},ke={class:"dialog-footer"},we={class:"border rounded p-3 bg-light"},ye={class:"small text-muted"},Ve={key:0},De=s("strong",null,"Status:",-1),Ye={key:1},Ee=s("strong",null,"Program ID:",-1),xe={key:2},Me=s("strong",null,"Periode Daftar:",-1),Pe={key:3},Se=s("strong",null,"Periode Training:",-1),Te={key:4},Ce=s("em",null,"Semua data training akan disertakan dalam laporan",-1),Ue=[Ce],Fe={class:"dialog-footer"},Be=s("i",{class:"fa fa-file-pdf-o me-1"},null,-1),pl={__name:"Index",props:{errors:{type:Object,default:()=>({})}},setup(v){const G=m([]),T=m(!0),I=m(""),L=m(25),N=m(0),R=m(0),H=m(0),K=m(1),J=m(0),na=_.debounce(()=>{T.value=!0,b()},1e3),b=async r=>{try{T.value=!0;const l=await la.get("/admin/training/data",{params:{page:r||1,limit:L.value,search:I.value}});l.status===200&&(G.value=l.data.data,K.value=l.data.current_page,N.value=l.data.total,J.value=l.data.per_page,R.value=l.data.from,H.value=l.data.to)}catch(l){console.error(l)}finally{T.value=!1}},k=r=>{if(r)return Ia(String(r)).format("DD MMM YYYY")},ra=r=>{switch(r){case"terdaftar":return"warning";case"sedang_pelatihan":return"info";case"selesai":return"success";default:return"info"}},sa=r=>{b()},ia=r=>{le.alert("Data yang dihapus tidak bisa dikembalikan!","Peringatan",{showCancelButton:!0,confirmButtonText:"Ya!",cancelButtonText:"Tidak!",type:"warning"}).then(()=>{oa.delete(route("admin.training.delete",{id:r}),{preserveScroll:!0,onSuccess:()=>{b(),S({type:"success",message:"Data Berhasil Dihapus!"})}})})},E=m(!1),j=m("Tambah Peserta"),x=m(!1),C=m(!1),da=m(!1),O=m(!1),M=m(!1),ua=m(),o=Va({status:"",program_id:"",tanggal_dari:"",tanggal_sampai:"",tanggal_mulai_dari:"",tanggal_mulai_sampai:""}),q={terdaftar:"Terdaftar",sedang_pelatihan:"Sedang Pelatihan",selesai:"Selesai",mengundurkan_diri:"Mengundurkan Diri"},n=Da({id:null,lamaran_id:null,program_id:null,tanggal_daftar:null,tanggal_mulai:null,tanggal_selesai:null,status:"terdaftar",nilai_akhir:null,sertifikat_diterbitkan:!1,nomor_sertifikat:"",catatan:""}),ma=()=>{E.value=!0,x.value=!1,j.value="Tambah Peserta",n.reset()},Q=()=>{E.value=!1,x.value=!1,n.reset(),n.clearErrors()},_a=r=>{x.value=!0,j.value="Ubah Peserta",E.value=!0,n.id=r.id,n.lamaran_id=r.lamaran_id,n.program_id=r.program_id,n.tanggal_daftar=r.tanggal_daftar,n.tanggal_mulai=r.tanggal_mulai,n.tanggal_selesai=r.tanggal_selesai,n.status=r.status,n.nilai_akhir=r.nilai_akhir,n.sertifikat_diterbitkan=r.sertifikat_diterbitkan,n.nomor_sertifikat=r.nomor_sertifikat,n.catatan=r.catatan},pa=async()=>{C.value=!0;try{let r=x.value?route("admin.training.update",{id:n.id}):route("admin.training.store");await la.post(r,n),S.success("Pelatihan berhasil didaftarkan"),b(),Q(),oa.visit(route("admin.training.index"),{preserveState:!1,preserveScroll:!0})}catch(r){console.error("Error scheduling training:",r),S.error("Gagal mendaftarkan pelatihan")}finally{C.value=!1}},ga=async()=>{O.value=!0;try{const r=new URLSearchParams;Object.keys(o).forEach(P=>{o[P]&&r.append(P,o[P])});const l=route("admin.training.export-pdf")+(r.toString()?"?"+r.toString():"");window.open(l,"_blank"),S.success("PDF sedang diproses, file akan didownload secara otomatis"),M.value=!1}catch(r){console.error("Error exporting PDF:",r),S.error("Gagal mengexport PDF")}finally{O.value=!1}},fa=r=>{Object.keys(o).forEach(l=>{o[l]=""}),r()};return Ya(()=>{b()}),(r,l)=>{const P=Pa,w=Ma,U=Ca,W=Ta,X=xa,c=$a,A=Aa,d=Oa,F=za,D=ja,h=Ra,ca=Ka,ha=Ga,va=Ja,u=Xa,y=Za,ba=ae,ka=Ha,Z=Wa,aa=Qa,wa=ee,ya=Ea("base-layout"),ea=qa;return f(),$(ya,null,{default:e(()=>[s("div",te,[s("div",oe,[ne,s("div",re,[a(X,{trigger:"click"},{dropdown:e(()=>[a(W,null,{default:e(()=>[a(U,{onClick:l[0]||(l[0]=t=>M.value=!0)},{default:e(()=>[ie,p(" Export PDF ")]),_:1})]),_:1})]),default:e(()=>[a(w,{type:"success",loading:da.value},{default:e(()=>[se,p(" Export "),a(P,{class:"el-icon--right"},{default:e(()=>[a(i(Sa))]),_:1})]),_:1},8,["loading"])]),_:1}),a(w,{onClick:ma,type:"primary"},{default:e(()=>[de,p(" Tambah Peserta ")]),_:1})])]),ta((f(),V("div",ue,[s("div",me,[a(D,{justify:"space-between"},{default:e(()=>[a(d,{span:12},{default:e(()=>[a(A,{modelValue:L.value,"onUpdate:modelValue":l[1]||(l[1]=t=>L.value=t),placeholder:"Pilih",style:{width:"110px"},onChange:l[2]||(l[2]=t=>b(1))},{default:e(()=>[a(c,{label:"25",value:"25"}),a(c,{label:"50",value:"50"}),a(c,{label:"100",value:"100"})]),_:1},8,["modelValue"])]),_:1}),a(d,{span:7},{default:e(()=>[a(F,{modelValue:I.value,"onUpdate:modelValue":l[3]||(l[3]=t=>I.value=t),onInput:i(na),clearable:""},{prefix:e(()=>[_e]),_:1},8,["modelValue","onInput"])]),_:1})]),_:1})]),s("div",pe,[a(ha,{data:G.value,class:"w-100",onSortChange:sa,"header-cell-class-name":"bg-body text-dark"},{default:e(()=>[a(h,{type:"index",width:"50"}),a(h,{prop:"user.nama",label:"Nama",width:"200px",sortable:""}),a(h,{prop:"program.nama",label:"Program",width:"200px",sortable:""}),a(h,{prop:"tanggal_daftar",label:"Tgl Daftar",sortable:""},{default:e(t=>[s("span",null,g(k(t.row.tanggal_daftar)),1)]),_:1}),a(h,{prop:"tanggal_mulai",label:"Tgl Mulai",sortable:""},{default:e(t=>[s("span",null,g(k(t.row.tanggal_mulai)),1)]),_:1}),a(h,{prop:"tanggal_selesai",label:"Tgl Selesai",sortable:""},{default:e(t=>[s("span",null,g(k(t.row.tanggal_selesai)),1)]),_:1}),a(h,{prop:"status",label:"Status",sortable:""},{default:e(t=>[a(ca,{type:ra(t.row.status),size:"small"},{default:e(()=>[p(g(t.row.status_label),1)]),_:2},1032,["type"])]),_:1}),a(h,{label:"Aksi",align:"center",width:"100px"},{default:e(t=>[a(X,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:e(()=>[a(W,null,{default:e(()=>[a(U,null,{default:e(()=>[a(i(Ua),{href:r.route("admin.training.show",{id:t.row.id}),class:"d-flex align-items-center justify-content-between space-x-1"},{default:e(()=>[p(" Detail "),fe]),_:2},1032,["href"])]),_:2},1024),a(U,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:z(B=>_a(t.row),["prevent"])},{default:e(()=>[p(" Ubah "),ce]),_:2},1032,["onClick"]),a(U,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:z(B=>ia(t.row.id),["prevent"])},{default:e(()=>[p(" Hapus "),he]),_:2},1032,["onClick"])]),_:2},1024)]),default:e(()=>[a(w,null,{default:e(()=>[ge]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["data"])]),s("div",ve,[a(D,{justify:"space-between"},{default:e(()=>[a(d,{lg:12,class:"d-flex"},{default:e(()=>[s("p",be,"Menampilkan "+g(R.value)+" sampai "+g(H.value)+" dari "+g(N.value),1)]),_:1}),a(d,{lg:12,class:"text-end"},{default:e(()=>[a(va,{class:"float-end",background:"",layout:"prev, pager, next","page-size":J.value,total:N.value,"current-page":K.value,onCurrentChange:b},null,8,["page-size","total","current-page"])]),_:1})]),_:1})])])),[[ea,T.value]]),ta((f(),$(aa,{modelValue:E.value,"onUpdate:modelValue":l[14]||(l[14]=t=>E.value=t),title:j.value,width:"600px","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:e(()=>[s("span",ke,[a(w,{onClick:Q},{default:e(()=>[p("Batal")]),_:1}),a(w,{type:"success",onClick:z(pa,["prevent"]),loading:C.value},{default:e(()=>[p(g(x.value?"Update":"Daftarkan"),1)]),_:1},8,["onClick","loading"])])]),default:e(()=>[a(Z,{model:i(n),"label-position":"top"},{default:e(()=>[a(u,{label:"Lamaran",error:v.errors.lamaran_id},{default:e(()=>[a(La,{modelValue:i(n).lamaran_id,"onUpdate:modelValue":l[4]||(l[4]=t=>i(n).lamaran_id=t),placeholder:"Pilih Lamaran",style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["error"]),a(u,{label:"Program Pelatihan",error:v.errors.program_id},{default:e(()=>[a(Na,{modelValue:i(n).program_id,"onUpdate:modelValue":l[5]||(l[5]=t=>i(n).program_id=t)},null,8,["modelValue"])]),_:1},8,["error"]),a(D,{gutter:20},{default:e(()=>[a(d,{md:12},{default:e(()=>[a(u,{label:"Tanggal Daftar",error:v.errors.tanggal_daftar},{default:e(()=>[a(y,{modelValue:i(n).tanggal_daftar,"onUpdate:modelValue":l[6]||(l[6]=t=>i(n).tanggal_daftar=t),type:"date",placeholder:"Pilih tanggal daftar",format:"DD/MM/YYYY","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["error"])]),_:1}),a(d,{md:12},{default:e(()=>[a(u,{label:"Status",error:v.errors.status},{default:e(()=>[a(A,{modelValue:i(n).status,"onUpdate:modelValue":l[7]||(l[7]=t=>i(n).status=t),placeholder:"Pilih status",style:{width:"100%"}},{default:e(()=>[a(c,{label:"Terdaftar",value:"terdaftar"}),a(c,{label:"Sedang Pelatihan",value:"sedang_pelatihan"}),a(c,{label:"Selesai",value:"selesai"}),a(c,{label:"Mengundurkan Diri",value:"mengundurkan_diri"})]),_:1},8,["modelValue"])]),_:1},8,["error"])]),_:1}),a(d,{md:12},{default:e(()=>[a(u,{label:"Tanggal Mulai",error:v.errors.tanggal_mulai},{default:e(()=>[a(y,{modelValue:i(n).tanggal_mulai,"onUpdate:modelValue":l[8]||(l[8]=t=>i(n).tanggal_mulai=t),type:"date",placeholder:"Pilih tanggal mulai",format:"DD/MM/YYYY","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["error"])]),_:1}),a(d,{md:12},{default:e(()=>[a(u,{label:"Tanggal Selesai",error:v.errors.tanggal_selesai},{default:e(()=>[a(y,{modelValue:i(n).tanggal_selesai,"onUpdate:modelValue":l[9]||(l[9]=t=>i(n).tanggal_selesai=t),type:"date",placeholder:"Pilih tanggal selesai",format:"DD/MM/YYYY","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["error"])]),_:1}),a(d,{md:12},{default:e(()=>[a(u,{label:"Nilai Akhir",error:v.errors.nilai_akhir},{default:e(()=>[a(ba,{modelValue:i(n).nilai_akhir,"onUpdate:modelValue":l[10]||(l[10]=t=>i(n).nilai_akhir=t),min:0,max:100,step:1,precision:0,placeholder:"Nilai 0-100",style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["error"])]),_:1}),a(d,{md:12},{default:e(()=>[a(u,{label:"Sertifikat"},{default:e(()=>[a(ka,{modelValue:i(n).sertifikat_diterbitkan,"onUpdate:modelValue":l[11]||(l[11]=t=>i(n).sertifikat_diterbitkan=t)},{default:e(()=>[p(" Sertifikat sudah diterbitkan ")]),_:1},8,["modelValue"])]),_:1})]),_:1}),i(n).sertifikat_diterbitkan?(f(),$(d,{key:0,md:12},{default:e(()=>[a(u,{label:"No. Sertifikat"},{default:e(()=>[a(F,{modelValue:i(n).nomor_sertifikat,"onUpdate:modelValue":l[12]||(l[12]=t=>i(n).nomor_sertifikat=t),placeholder:"Nomor sertifikat"},null,8,["modelValue"])]),_:1})]),_:1})):Y("",!0)]),_:1}),a(u,{label:"Catatan"},{default:e(()=>[a(F,{modelValue:i(n).catatan,"onUpdate:modelValue":l[13]||(l[13]=t=>i(n).catatan=t),type:"textarea",rows:3,placeholder:"Catatan tambahan (opsional)"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])),[[ea,C.value]]),a(aa,{modelValue:M.value,"onUpdate:modelValue":l[22]||(l[22]=t=>M.value=t),title:"Export Laporan Training PDF",width:"600px","before-close":fa},{footer:e(()=>[s("span",Fe,[a(w,{onClick:l[21]||(l[21]=t=>M.value=!1)},{default:e(()=>[p("Batal")]),_:1}),a(w,{type:"danger",onClick:ga,loading:O.value},{default:e(()=>[Be,p(" Generate PDF ")]),_:1},8,["loading"])])]),default:e(()=>[a(Z,{model:o,"label-position":"top",ref_key:"pdfExportFormRef",ref:ua},{default:e(()=>[a(wa,{title:"Export Laporan Training PDF",type:"info",description:"Pilih filter untuk menggenerate laporan PDF yang komprehensif dengan detail lengkap data training.","show-icon":"",closable:!1,class:"mb-4"}),a(D,{gutter:16},{default:e(()=>[a(d,{span:12},{default:e(()=>[a(u,{label:"Filter Status"},{default:e(()=>[a(A,{modelValue:o.status,"onUpdate:modelValue":l[15]||(l[15]=t=>o.status=t),placeholder:"Pilih status (opsional)",clearable:"",style:{width:"100%"}},{default:e(()=>[(f(),V(Fa,null,Ba(q,(t,B)=>a(c,{key:B,label:t,value:B},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(d,{span:12},{default:e(()=>[a(u,{label:"Program ID"},{default:e(()=>[a(F,{modelValue:o.program_id,"onUpdate:modelValue":l[16]||(l[16]=t=>o.program_id=t),placeholder:"ID Program (opsional)"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(D,{gutter:16},{default:e(()=>[a(d,{span:12},{default:e(()=>[a(u,{label:"Tanggal Daftar Mulai"},{default:e(()=>[a(y,{modelValue:o.tanggal_dari,"onUpdate:modelValue":l[17]||(l[17]=t=>o.tanggal_dari=t),type:"date",placeholder:"Pilih tanggal mulai",style:{width:"100%"},format:"DD/MM/YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1}),a(d,{span:12},{default:e(()=>[a(u,{label:"Tanggal Daftar Akhir"},{default:e(()=>[a(y,{modelValue:o.tanggal_sampai,"onUpdate:modelValue":l[18]||(l[18]=t=>o.tanggal_sampai=t),type:"date",placeholder:"Pilih tanggal akhir",style:{width:"100%"},format:"DD/MM/YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(D,{gutter:16},{default:e(()=>[a(d,{span:12},{default:e(()=>[a(u,{label:"Tanggal Mulai Training"},{default:e(()=>[a(y,{modelValue:o.tanggal_mulai_dari,"onUpdate:modelValue":l[19]||(l[19]=t=>o.tanggal_mulai_dari=t),type:"date",placeholder:"Pilih tanggal mulai training",style:{width:"100%"},format:"DD/MM/YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1}),a(d,{span:12},{default:e(()=>[a(u,{label:"Tanggal Mulai Training Akhir"},{default:e(()=>[a(y,{modelValue:o.tanggal_mulai_sampai,"onUpdate:modelValue":l[20]||(l[20]=t=>o.tanggal_mulai_sampai=t),type:"date",placeholder:"Pilih tanggal akhir training",style:{width:"100%"},format:"DD/MM/YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(u,{label:"Preview Filter"},{default:e(()=>[s("div",we,[s("div",ye,[o.status?(f(),V("div",Ve,[De,p(" "+g(q[o.status]),1)])):Y("",!0),o.program_id?(f(),V("div",Ye,[Ee,p(" "+g(o.program_id),1)])):Y("",!0),o.tanggal_dari||o.tanggal_sampai?(f(),V("div",xe,[Me,p(" "+g(o.tanggal_dari?k(o.tanggal_dari):"Awal")+" - "+g(o.tanggal_sampai?k(o.tanggal_sampai):"Sekarang"),1)])):Y("",!0),o.tanggal_mulai_dari||o.tanggal_mulai_sampai?(f(),V("div",Pe,[Se,p(" "+g(o.tanggal_mulai_dari?k(o.tanggal_mulai_dari):"Awal")+" - "+g(o.tanggal_mulai_sampai?k(o.tanggal_mulai_sampai):"Sekarang"),1)])):Y("",!0),!o.status&&!o.program_id&&!o.tanggal_dari&&!o.tanggal_sampai&&!o.tanggal_mulai_dari&&!o.tanggal_mulai_sampai?(f(),V("div",Te,Ue)):Y("",!0)])])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])]),_:1})}}};export{pl as default};
