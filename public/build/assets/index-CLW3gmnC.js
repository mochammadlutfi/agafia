import{cB as Se,e as _e,f as Te,_ as Ce,k as Q,ab as Pe,u as J,ai as De,c as _,r as W,n as we,ac as Ee,o as Re,B as h,y as f,t,K as A,C as V,V as E,bz as Oe,aK as B,a8 as Ae,b9 as Ve,z as Ie}from"./id-B6nzwgpI.js";import{t as xe,P as Ne,u as Me,a as Ke,T as q,b as ye,c as Be,d as Ue,e as He,D as Fe,C as Le,f as je}from"./index-Vcj5-Pos.js";import{b as Ye,i as ze}from"./isArrayLikeObject-CwVoBkBj.js";import{s as X,S as $e,c as Ge}from"./index-BTTm5nEU.js";import{b as Je}from"./index-nMKTPBRL.js";import{j as U}from"./_Uint8Array-CGYHTGVX.js";import{U as Z}from"./event-BB_Ol6Sd.js";function qe(){}function Ze(s){return s!==s}function Qe(s,r,o){for(var c=o-1,p=s.length;++c<p;)if(s[c]===r)return c;return-1}function We(s,r,o){return r===r?Qe(s,r,o):Je(s,Ze,o)}function Xe(s,r){var o=s==null?0:s.length;return!!o&&We(s,r,0)>-1}var en=1/0,nn=U&&1/X(new U([,-0]))[1]==en?function(s){return new U(s)}:qe,an=200;function tn(s,r,o){var c=-1,p=Xe,b=s.length,a=!0,v=[],m=v;if(b>=an){var T=nn(s);if(T)return X(T);a=!1,p=Ge,m=new $e}else m=v;e:for(;++c<b;){var k=s[c],S=k;if(k=k!==0?k:0,a&&S===S){for(var R=m.length;R--;)if(m[R]===S)continue e;v.push(k)}else p(m,S,o)||(m!==v&&m.push(S),v.push(k))}return v}var H=Ye(function(s){return tn(Se(s,1,ze,!0))});const sn=_e({...xe,parsedValue:{type:Te(Array)}}),on=Q({__name:"panel-time-range",props:sn,emits:["pick","select-range","set-picker-option"],setup(s,{emit:r}){const o=s,c=(e,n)=>{const l=[];for(let i=e;i<=n;i++)l.push(i);return l},{t:p,lang:b}=Pe(),a=J("time"),v=J("picker"),m=De(Ne),{arrowControl:T,disabledHours:k,disabledMinutes:S,disabledSeconds:R,defaultValue:I}=m.props,ee=_(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",T),D.value?"has-seconds":""]),ne=_(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",T),D.value?"has-seconds":""]),C=_(()=>o.parsedValue[0]),P=_(()=>o.parsedValue[1]),ae=Me(o),te=()=>{r("pick",ae.value,!1)},D=_(()=>o.format.includes("ss")),F=_(()=>o.format.includes("A")?"A":o.format.includes("a")?"a":""),se=(e=!1)=>{r("pick",[C.value,P.value],e)},oe=e=>{L(e.millisecond(0),P.value)},re=e=>{L(C.value,e.millisecond(0))},le=e=>{const n=e.map(i=>E(i).locale(b.value)),l=Y(n);return n[0].isSame(l[0])&&n[1].isSame(l[1])},L=(e,n)=>{o.visible&&r("pick",[e,n],!0)},ie=_(()=>C.value>P.value),O=W([0,2]),ce=(e,n)=>{r("select-range",e,n,"min"),O.value=[e,n]},j=_(()=>D.value?11:8),ue=(e,n)=>{r("select-range",e,n,"max");const l=t(j);O.value=[e+l,n+l]},de=e=>{const n=D.value?[0,3,6,11,14,17]:[0,3,8,11],l=["hours","minutes"].concat(D.value?["seconds"]:[]),u=(n.indexOf(O.value[0])+e+n.length)%n.length,d=n.length/2;u<d?K.start_emitSelectRange(l[u]):K.end_emitSelectRange(l[u-d])},pe=e=>{const n=e.code,{left:l,right:i,up:u,down:d}=Oe;if([l,i].includes(n)){de(n===l?-1:1),e.preventDefault();return}if([u,d].includes(n)){const g=n===u?-1:1,w=O.value[0]<j.value?"start":"end";K[`${w}_scrollDown`](g),e.preventDefault();return}},x=(e,n)=>{const l=k?k(e):[],i=e==="start",d=(n||(i?P.value:C.value)).hour(),g=i?c(d+1,23):c(0,d-1);return H(l,g)},N=(e,n,l)=>{const i=S?S(e,n):[],u=n==="start",d=l||(u?P.value:C.value),g=d.hour();if(e!==g)return i;const w=d.minute(),y=u?c(w+1,59):c(0,w-1);return H(i,y)},M=(e,n,l,i)=>{const u=R?R(e,n,l):[],d=l==="start",g=i||(d?P.value:C.value),w=g.hour(),y=g.minute();if(e!==w||n!==y)return u;const G=g.second(),ke=d?c(G+1,59):c(0,G-1);return H(u,ke)},Y=([e,n])=>[z(e,"start",!0,n),z(n,"end",!1,e)],{getAvailableHours:me,getAvailableMinutes:fe,getAvailableSeconds:be}=ye(x,N,M),{timePickerOptions:K,getAvailableTime:z,onSetOption:$}=Ke({getAvailableHours:me,getAvailableMinutes:fe,getAvailableSeconds:be}),ve=e=>e?B(e)?e.map(n=>E(n,o.format).locale(b.value)):E(e,o.format).locale(b.value):null,ge=e=>e?B(e)?e.map(n=>n.format(o.format)):e.format(o.format):null,he=()=>{if(B(I))return I.map(n=>E(n).locale(b.value));const e=E(I).locale(b.value);return[e,e.add(60,"m")]};return r("set-picker-option",["formatToString",ge]),r("set-picker-option",["parseUserInput",ve]),r("set-picker-option",["isValidValue",le]),r("set-picker-option",["handleKeydownInput",pe]),r("set-picker-option",["getDefaultValue",he]),r("set-picker-option",["getRangeAvailableTime",Y]),(e,n)=>e.actualVisible?(Re(),we("div",{key:0,class:f([t(a).b("range-picker"),t(v).b("panel")])},[h("div",{class:f(t(a).be("range-picker","content"))},[h("div",{class:f(t(a).be("range-picker","cell"))},[h("div",{class:f(t(a).be("range-picker","header"))},A(t(p)("el.datepicker.startTime")),3),h("div",{class:f(t(ee))},[V(q,{ref:"minSpinner",role:"start","show-seconds":t(D),"am-pm-mode":t(F),"arrow-control":t(T),"spinner-date":t(C),"disabled-hours":x,"disabled-minutes":N,"disabled-seconds":M,onChange:oe,onSetOption:t($),onSelectRange:ce},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),h("div",{class:f(t(a).be("range-picker","cell"))},[h("div",{class:f(t(a).be("range-picker","header"))},A(t(p)("el.datepicker.endTime")),3),h("div",{class:f(t(ne))},[V(q,{ref:"maxSpinner",role:"end","show-seconds":t(D),"am-pm-mode":t(F),"arrow-control":t(T),"spinner-date":t(P),"disabled-hours":x,"disabled-minutes":N,"disabled-seconds":M,onChange:re,onSetOption:t($),onSelectRange:ue},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),h("div",{class:f(t(a).be("panel","footer"))},[h("button",{type:"button",class:f([t(a).be("panel","btn"),"cancel"]),onClick:l=>te()},A(t(p)("el.datepicker.cancel")),11,["onClick"]),h("button",{type:"button",class:f([t(a).be("panel","btn"),"confirm"]),disabled:t(ie),onClick:l=>se()},A(t(p)("el.datepicker.confirm")),11,["disabled","onClick"])],2)],2)):Ee("v-if",!0)}});var rn=Ce(on,[["__file","panel-time-range.vue"]]);E.extend(je);var ln=Q({name:"ElTimePicker",install:null,props:{...Be,isRange:{type:Boolean,default:!1}},emits:[Z],setup(s,r){const o=W(),[c,p]=s.isRange?["timerange",rn]:["time",Ue],b=a=>r.emit(Z,a);return Ae(He,s.popperOptions),r.expose({focus:()=>{var a;(a=o.value)==null||a.focus()},blur:()=>{var a;(a=o.value)==null||a.blur()},handleOpen:()=>{var a;(a=o.value)==null||a.handleOpen()},handleClose:()=>{var a;(a=o.value)==null||a.handleClose()}}),()=>{var a;const v=(a=s.format)!=null?a:Fe;return V(Le,Ve(s,{ref:o,type:c,format:v,"onUpdate:modelValue":b}),{default:m=>V(p,m,null)})}}});const vn=Ie(ln);export{vn as E};
