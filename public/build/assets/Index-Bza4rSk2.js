import{r as i,a as ia,aC as U,a5 as ra,U as da,p as ua,o as Y,v as t,B as s,C as a,ad as pa,O as ma,J as m,n as ca,t as B,K as c,I as _a,L as fa,M as wa,G as ga,H as P,am as L}from"./id-C9hYMH1B.js";import{h as va}from"./moment-D15uM1gO.js";import{_ as ba}from"./SelectLamaran-PL-v-94B.js";import{_ as ka}from"./SelectStaff-DNAhIAU3.js";import{a as ha,E as ya}from"./index-BeNpYn1C.js";import{E as Ea,a as Va}from"./index-B7oIPsZq.js";import{E as xa}from"./index-wNIjKzA9.js";import{E as Ca,a as ja}from"./index--er-YjEa.js";import{E as Da}from"./index-DpPGiUdG.js";import{E as Ma}from"./index-ZMuYLrAD.js";import{v as Sa}from"./directive-BsyuVYtP.js";import{E as Ia}from"./index-lsY82Nw0.js";import{E as Ta,a as Ua}from"./index-DVyup1uO.js";import{E as Ya}from"./index-Cim0JZIT.js";import{E as Ba}from"./index-BWCN1dpC.js";import{E as Pa}from"./index-DbSZ3Hba.js";import{E as j}from"./index-Cp4QcoMp.js";import"./typescript-Bp3YSIOJ.js";import"./index-GOrWjhdZ.js";import"./_Uint8Array-DpVHxJNR.js";import"./event-BB_Ol6Sd.js";import"./scroll-Do2KWamR.js";import"./_baseIteratee-DSxqpu-w.js";import"./vnode-C8DSHsEw.js";import"./index-Cgih6hI8.js";import"./_initCloneObject-iXJsdRzn.js";import"./isArrayLikeObject-CsAwkISA.js";import"./index-CyWwbtSv.js";import"./index-B8Y3CyFA.js";import"./validator-KIENhd6v.js";const La={class:"content"},Fa={class:"content-heading d-flex justify-content-between align-items-center"},Ha=s("span",null,"Interview",-1),$a={class:"space-x-1"},qa=s("i",{class:"si si-plus me-1"},null,-1),Ja={class:"block rounded bordered"},Oa={class:"block-content py-3"},za=s("span",null,[s("i",{class:"fa fa-search"})],-1),Ra={class:"block-content p-0"},Ka={class:"fw-medium"},Na={class:"text-muted"},Ga=s("i",{class:"fa-solid fa-ellipsis"},null,-1),Aa=s("i",{class:"si fa-fw si-eye"},null,-1),Wa=s("i",{class:"si fa-fw si-trash"},null,-1),Za=s("i",{class:"si fa-fw si-trash"},null,-1),Qa={class:"block-content py-2"},Xa={class:"my-auto text-xs"},ae={class:"dialog-footer"},D=25,Te={__name:"Index",props:{error:Object},setup(ee){const M=i([]),b=i(!0),k=i(""),h=i(0),y=i(0),F=i(0),S=i(1),I=i(0),f=i(!1),E=i(!1),w=i(),o=ia({id:null,lamaran_id:null,tanggal:"",lokasi:"",pewawancara_id:"",status:"dijadwalkan",catatan:""}),H={lamaran:[{required:!0,message:"Lamaran wajib diisi",trigger:"change"}],tanggal:[{required:!0,message:"Tanggal interview wajib diisi",trigger:"blur"}],lokasi:[{required:!0,message:"Lokasi interview wajib diisi",trigger:"blur"}],pewawancara_id:[{required:!0,message:"Pewawancara wajib dipilih",trigger:"change"}],status:[{required:!0,message:"Status wajib dipilih",trigger:"change"}]},$=_.debounce(()=>{b.value=!0,r()},1e3),r=async n=>{try{b.value=!0;const e=await U.get("/admin/interview/data",{params:{page:n||1,limit:D,search:k.value}});e.status===200&&(M.value=e.data.data,S.value=e.data.current_page,h.value=e.data.total,I.value=e.data.per_page,y.value=e.data.from,y.to=e.data.to)}catch(e){console.error(e)}finally{b.value=!1}},q=n=>{if(n)return va(String(n)).format("DD MMM YYYY")},J=n=>{switch(n){case"dijadwalkan":return"info";case"selesai":return"success";case"dijadwal_ulang":return"warning";default:return"danger"}},O=n=>{r()},z=n=>{Pa.alert("Data yang dihapus tidak bisa dikembalikan!","Peringatan",{showCancelButton:!0,confirmButtonText:"Ya!",cancelButtonText:"Tidak!",type:"warning"}).then(()=>{L.delete(route("admin.interview.delete",{id:n}),{preserveScroll:!0,onSuccess:()=>{r(),j({type:"success",message:"Data Berhasil Dihapus!"})}})})},R=()=>{var n;f.value=!0,(n=w.value)==null||n.resetFields(),o.id=null,o.lamaran_id=null,o.tanggal="",o.lokasi="",o.pewawancara_id="",o.status="dijadwalkan",o.catatan=""},K=n=>{var e;f.value=!0,(e=w.value)==null||e.resetFields(),o.id=n.id,o.lamaran_id=n.lamaran_id,o.tanggal=n.tanggal,o.lokasi=n.lokasi,o.pewawancara_id=n.pewawancara_id,o.status=n.status,o.catatan=n.catatan||""},N=n=>{var e;(e=w.value)==null||e.resetFields(),n()},G=async()=>{w.value&&(await w.value.validate(n=>{if(n){E.value=!0;const e=o.id?route("admin.interview.update",{id:o.id}):route("admin.interview.store");try{U.post(e,o),j.success("Interview berhasil disimpan"),f.value=!1,L.visit(route("admin.interview.index"),{preserveState:!1,preserveScroll:!0})}catch{j.error("Gagal menjadwalkan interview")}finally{E.value=!1}}}),r())};return ra(()=>{r()}),(n,e)=>{const v=ma,d=Va,T=Ea,g=ya,V=xa,x=ha,u=ja,A=Da,C=wa,W=fa,Z=_a,Q=Ca,X=Ma,p=Ua,aa=Ya,ea=Ba,ta=Ta,la=Ia,oa=da("base-layout"),na=Sa;return Y(),ua(oa,null,{default:t(()=>[s("div",La,[s("div",Fa,[Ha,s("div",$a,[a(v,{type:"primary",onClick:R},{default:t(()=>[qa,m(" Tambah Jadwal ")]),_:1})])]),pa((Y(),ca("div",Ja,[s("div",Oa,[a(x,{justify:"space-between"},{default:t(()=>[a(g,{span:12},{default:t(()=>[a(T,{modelValue:D,"onUpdate:modelValue":e[0]||(e[0]=l=>D=l),placeholder:"Pilih",style:{width:"110px"},onChange:e[1]||(e[1]=l=>r(1))},{default:t(()=>[a(d,{label:"25",value:"25"}),a(d,{label:"50",value:"50"}),a(d,{label:"100",value:"100"})]),_:1})]),_:1}),a(g,{span:7},{default:t(()=>[a(V,{modelValue:k.value,"onUpdate:modelValue":e[2]||(e[2]=l=>k.value=l),onInput:B($),clearable:""},{prefix:t(()=>[za]),_:1},8,["modelValue","onInput"])]),_:1})]),_:1})]),s("div",Ra,[a(Q,{data:M.value,class:"w-100",onSortChange:O,"header-cell-class-name":"bg-body text-dark"},{default:t(()=>[a(u,{type:"index",width:"50"}),a(u,{label:"Lamaran",width:"200",sortable:""},{default:t(l=>[s("div",null,[s("div",Ka,c(l.row.lamaran.user.nama),1),s("small",Na,c(l.row.lamaran.lowongan.posisi),1)])]),_:1}),a(u,{prop:"tanggal",label:"Tanggal",sortable:""},{default:t(l=>[s("span",null,c(q(l.row.tanggal)),1)]),_:1}),a(u,{prop:"lokasi",label:"Lokasi",sortable:""}),a(u,{prop:"pewawancara.nama",label:"Pewawancara",sortable:""}),a(u,{label:"Status",prop:"status",align:"center",width:"180"},{default:t(l=>[a(A,{type:J(l.row.status),size:"small"},{default:t(()=>[m(c(l.row.status_label),1)]),_:2},1032,["type"])]),_:1}),a(u,{label:"Aksi",align:"center",width:"150"},{default:t(l=>[a(Z,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:t(()=>[a(W,null,{default:t(()=>[a(C,null,{default:t(()=>[a(B(ga),{href:n.route("admin.interview.show",{id:l.row.id}),class:"w-100 d-flex align-items-center justify-content-between space-x-1"},{default:t(()=>[m(" Detail "),Aa]),_:2},1032,["href"])]),_:2},1024),a(C,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:P(sa=>K(l.row),["prevent"])},{default:t(()=>[m(" Ubah Jadwal "),Wa]),_:2},1032,["onClick"]),a(C,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:P(sa=>z(l.row.id),["prevent"])},{default:t(()=>[m(" Hapus "),Za]),_:2},1032,["onClick"])]),_:2},1024)]),default:t(()=>[a(v,null,{default:t(()=>[Ga]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["data"])]),s("div",Qa,[a(x,{justify:"space-between"},{default:t(()=>[a(g,{lg:12,class:"d-flex"},{default:t(()=>[s("p",Xa,"Menampilkan "+c(y.value)+" sampai "+c(F.value)+" dari "+c(h.value),1)]),_:1}),a(g,{lg:12,class:"text-end"},{default:t(()=>[a(X,{class:"float-end",background:"",layout:"prev, pager, next","page-size":I.value,total:h.value,"current-page":S.value,onCurrentChange:r},null,8,["page-size","total","current-page"])]),_:1})]),_:1})])])),[[na,b.value]])]),a(la,{modelValue:f.value,"onUpdate:modelValue":e[11]||(e[11]=l=>f.value=l),title:"Jadwalkan Interview",width:"700px","before-close":N},{footer:t(()=>[s("span",ae,[a(v,{onClick:e[10]||(e[10]=l=>f.value=!1)},{default:t(()=>[m("Batal")]),_:1}),a(v,{type:"primary",onClick:G,loading:E.value},{default:t(()=>[m(" Jadwalkan Interview ")]),_:1},8,["loading"])])]),default:t(()=>[a(ta,{model:o,rules:H,ref_key:"interviewFormRef",ref:w,"label-width":"150px"},{default:t(()=>[a(p,{label:"Lamaran",prop:"lamaran_id"},{default:t(()=>[a(ba,{modelValue:o.lamaran_id,"onUpdate:modelValue":e[3]||(e[3]=l=>o.lamaran_id=l),status:"diterima"},null,8,["modelValue"])]),_:1}),a(x,{gutter:16},{default:t(()=>[a(g,{span:12},{default:t(()=>[a(p,{label:"Tanggal",prop:"tanggal"},{default:t(()=>[a(aa,{modelValue:o.tanggal,"onUpdate:modelValue":e[4]||(e[4]=l=>o.tanggal=l),type:"date",placeholder:"Pilih tanggal",format:"DD/MM/YYYY ","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),a(g,{span:12},{default:t(()=>[a(p,{label:"Waktu",prop:"waktu"},{default:t(()=>[a(ea,{modelValue:o.waktu,"onUpdate:modelValue":e[5]||(e[5]=l=>o.waktu=l),placeholder:"Pilih waktu",format:"HH:mm","value-format":"HH:mm:ss",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(p,{label:"Lokasi",prop:"lokasi"},{default:t(()=>[a(V,{modelValue:o.lokasi,"onUpdate:modelValue":e[6]||(e[6]=l=>o.lokasi=l),placeholder:"Masukkan lokasi interview (misal: Kantor Pusat, Online via Zoom, dll)"},null,8,["modelValue"])]),_:1}),a(p,{label:"Pewawancara",prop:"pewawancara_id"},{default:t(()=>[a(ka,{modelValue:o.pewawancara_id,"onUpdate:modelValue":e[7]||(e[7]=l=>o.pewawancara_id=l)},null,8,["modelValue"])]),_:1}),a(p,{label:"Status",prop:"status"},{default:t(()=>[a(T,{modelValue:o.status,"onUpdate:modelValue":e[8]||(e[8]=l=>o.status=l),placeholder:"Pilih status",style:{width:"100%"}},{default:t(()=>[a(d,{label:"Dijadwalkan",value:"dijadwalkan"}),a(d,{label:"Selesai",value:"selesai"}),a(d,{label:"Dibatalkan",value:"dibatalkan"}),a(d,{label:"Dijadwal Ulang",value:"dijadwal_ulang"})]),_:1},8,["modelValue"])]),_:1}),a(p,{label:"Catatan"},{default:t(()=>[a(V,{modelValue:o.catatan,"onUpdate:modelValue":e[9]||(e[9]=l=>o.catatan=l),type:"textarea",rows:3,placeholder:"Catatan tambahan (opsional)"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1})}}};export{Te as default};
