import{r as n,aC as ne,an as re,a5 as ie,U as de,p as j,o as T,v as a,B as o,ad as z,C as e,O as ue,J as c,n as ce,t as r,K as p,I as pe,L as me,M as _e,G as F,H as I,am as fe}from"./id-B6nzwgpI.js";import{h as ge}from"./moment-D15uM1gO.js";import{_ as he}from"./SelectTalent-DGMeGBuD.js";import{_ as be}from"./SelectProgram-DzgYSLo6.js";import{a as ve,E as we}from"./index-CNWh6HZ7.js";import{E as ye,a as Ee}from"./index-nMKTPBRL.js";import{E as ke}from"./index-DMhCjaYJ.js";import{E as xe,a as Ce}from"./index-cVjCorqK.js";import{E as Te}from"./index-CS-U25Rj.js";import{E as Ve}from"./index-DLn63ED9.js";import{v as Se}from"./directive-K_WTEYF8.js";import{E as De}from"./index-u7wZ4eP6.js";import{E as Be,a as Me}from"./index-BZwtmcJ_.js";import{E as Pe}from"./index-Vcj5-Pos.js";import{E as Ue}from"./index-CuUXQnr8.js";import{E as O}from"./index-CWdicLEL.js";import"./typescript-Bp3YSIOJ.js";import"./index-BTTm5nEU.js";import"./_Uint8Array-CGYHTGVX.js";import"./event-BB_Ol6Sd.js";import"./scroll-Dq92vYzH.js";import"./_baseIteratee-CEMChci4.js";import"./vnode-Bjz-F9iQ.js";import"./index-ng22Bdpy.js";import"./_initCloneObject-Du_knNGi.js";import"./isArrayLikeObject-CwVoBkBj.js";import"./index-CzfI5m8E.js";import"./index-CmxPKCL5.js";import"./validator-DGQAUmUB.js";const je={class:"content"},ze={class:"content-heading d-flex justify-content-between align-items-center"},Fe=o("span",null,"Peserta Training",-1),Ie={class:"space-x-1"},Oe=o("i",{class:"si si-plus me-1"},null,-1),Ye={class:"block rounded bordered"},$e={class:"block-content py-3"},Ne=o("span",null,[o("i",{class:"fa fa-search"})],-1),Le={class:"block-content p-0"},He=o("i",{class:"fa-solid fa-ellipsis"},null,-1),Ke=o("i",{class:"si fa-fw si-eye"},null,-1),Ae=o("i",{class:"si fa-fw si-note"},null,-1),Ge=o("i",{class:"si fa-fw si-trash"},null,-1),Je={class:"block-content py-2"},Re={class:"my-auto text-xs"},qe={class:"text-end"},Qe=o("i",{class:"fa fa-close me-2"},null,-1),We=o("i",{class:"fa fa-check me-2"},null,-1),V=25,Sa={__name:"Index",props:{errors:{type:Object,default:()=>({})}},setup(b){const S=n([]),m=n(!0),v=n(""),w=n(0),y=n(0),Y=n(0),D=n(1),B=n(0),$=_.debounce(()=>{m.value=!0,u()},1e3),u=async s=>{try{m.value=!0;const l=await ne.get("/admin/training/data",{params:{page:s||1,limit:V,search:v.value}});l.status===200&&(S.value=l.data.data,D.value=l.data.current_page,w.value=l.data.total,B.value=l.data.per_page,y.value=l.data.from,y.to=l.data.to)}catch(l){console.error(l)}finally{m.value=!1}},E=s=>{if(s)return ge(String(s)).format("DD MMM YYYY")},N=s=>{switch(s){case"terdaftar":return"warning";case"sedang_pelatihan":return"info";case"selesai":return"success";default:return"info"}},L=s=>{u()},H=s=>{Ue.alert("Data yang dihapus tidak bisa dikembalikan!","Peringatan",{showCancelButton:!0,confirmButtonText:"Ya!",cancelButtonText:"Tidak!",type:"warning"}).then(()=>{fe.delete(`/admin/training/${s}/delete`,{preserveScroll:!0,onSuccess:()=>{u(),O({type:"success",message:"Data Berhasil Dihapus!"})}})})},f=n(!1),K=n("Tambah Peserta"),A=n(!1),M=n(!1),i=re({id:null,user_id:null,program_id:null,tanggal:null}),G=()=>{f.value=!0},J=()=>{f.value=!1},R=()=>{let s=A.value?route("admin.training.update",{id:i.id}):route("admin.training.store");i.post(s,{preserveScroll:!0,onFinish:()=>{M.value=!1,u()},onSuccess:()=>{O({type:"success",message:"Data Berhasil Disimpan!"}),this.onCloseForm()}})};return ie(()=>{u()}),(s,l)=>{const g=ue,k=Ee,q=ye,h=we,Q=ke,P=ve,d=Ce,W=Te,x=_e,X=me,Z=pe,ee=xe,ae=Ve,C=Me,te=Pe,le=Be,oe=De,se=de("base-layout"),U=Se;return T(),j(se,null,{default:a(()=>[o("div",je,[o("div",ze,[Fe,o("div",Ie,[e(g,{onClick:G,type:"primary"},{default:a(()=>[Oe,c(" Tambah Peserta ")]),_:1})])]),z((T(),ce("div",Ye,[o("div",$e,[e(P,{justify:"space-between"},{default:a(()=>[e(h,{span:12},{default:a(()=>[e(q,{modelValue:V,"onUpdate:modelValue":l[0]||(l[0]=t=>V=t),placeholder:"Pilih",style:{width:"110px"},onChange:l[1]||(l[1]=t=>u(1))},{default:a(()=>[e(k,{label:"25",value:"25"}),e(k,{label:"50",value:"50"}),e(k,{label:"100",value:"100"})]),_:1})]),_:1}),e(h,{span:7},{default:a(()=>[e(Q,{modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=t=>v.value=t),onInput:r($),clearable:""},{prefix:a(()=>[Ne]),_:1},8,["modelValue","onInput"])]),_:1})]),_:1})]),o("div",Le,[e(ee,{data:S.value,class:"w-100",onSortChange:L,"header-cell-class-name":"bg-body text-dark"},{default:a(()=>[e(d,{type:"index",width:"50"}),e(d,{prop:"user.nama",label:"Nama",width:"200px",sortable:""}),e(d,{prop:"program.nama",label:"Program",width:"200px",sortable:""}),e(d,{prop:"tanggal_daftar",label:"Tgl Daftar",sortable:""},{default:a(t=>[o("span",null,p(E(t.row.tanggal_daftar)),1)]),_:1}),e(d,{prop:"tanggal_mulai",label:"Tgl Mulai",sortable:""},{default:a(t=>[o("span",null,p(E(t.row.tanggal_mulai)),1)]),_:1}),e(d,{prop:"tanggal_selesai",label:"Tgl Selesai",sortable:""},{default:a(t=>[o("span",null,p(E(t.row.tanggal_selesai)),1)]),_:1}),e(d,{prop:"status",label:"Status",sortable:""},{default:a(t=>[e(W,{type:N(t.row.status),size:"small"},{default:a(()=>[c(p(t.row.status_label),1)]),_:2},1032,["type"])]),_:1}),e(d,{label:"Aksi",align:"center",width:"100px"},{default:a(t=>[e(Z,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:a(()=>[e(X,null,{default:a(()=>[e(x,null,{default:a(()=>[e(r(F),{href:s.route("admin.training.show",{id:t.row.id}),class:"d-flex align-items-center justify-content-between space-x-1"},{default:a(()=>[c(" Detail "),Ke]),_:2},1032,["href"])]),_:2},1024),e(x,null,{default:a(()=>[e(r(F),{href:s.route("admin.training.edit",{id:t.row.id}),class:"d-flex align-items-center justify-content-between space-x-1"},{default:a(()=>[c(" Ubah "),Ae]),_:2},1032,["href"])]),_:2},1024),e(x,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:I(Xe=>H(t.row.id),["prevent"])},{default:a(()=>[c(" Hapus "),Ge]),_:2},1032,["onClick"])]),_:2},1024)]),default:a(()=>[e(g,null,{default:a(()=>[He]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["data"])]),o("div",Je,[e(P,{justify:"space-between"},{default:a(()=>[e(h,{lg:12,class:"d-flex"},{default:a(()=>[o("p",Re,"Menampilkan "+p(y.value)+" sampai "+p(Y.value)+" dari "+p(w.value),1)]),_:1}),e(h,{lg:12,class:"text-end"},{default:a(()=>[e(ae,{class:"float-end",background:"",layout:"prev, pager, next","page-size":B.value,total:w.value,"current-page":D.value,onCurrentChange:u},null,8,["page-size","total","current-page"])]),_:1})]),_:1})])])),[[U,m.value]]),z((T(),j(oe,{modelValue:f.value,"onUpdate:modelValue":l[6]||(l[6]=t=>f.value=t),title:K.value,width:"40%","close-on-click-modal":!1,"close-on-press-escape":!1},{default:a(()=>[e(le,{model:r(i),"label-position":"top"},{default:a(()=>[e(C,{label:"Talent",error:b.errors.user_id},{default:a(()=>[e(he,{modelValue:r(i).user_id,"onUpdate:modelValue":l[3]||(l[3]=t=>r(i).user_id=t),status:"medical"},null,8,["modelValue"])]),_:1},8,["error"]),e(C,{label:"Program",error:b.errors.program_id},{default:a(()=>[e(be,{modelValue:r(i).program_id,"onUpdate:modelValue":l[4]||(l[4]=t=>r(i).program_id=t)},null,8,["modelValue"])]),_:1},8,["error"]),e(C,{label:"Tanggal",error:b.errors.tanggal},{default:a(()=>[e(te,{modelValue:r(i).tanggal,"onUpdate:modelValue":l[5]||(l[5]=t=>r(i).tanggal=t),type:"daterange","range-separator":"Sampai","start-placeholder":"Tangal Mulai","end-placeholder":"Tanggal Selesai",size:s.size},null,8,["modelValue","size"])]),_:1},8,["error"]),o("div",qe,[e(g,{onClick:J},{default:a(()=>[Qe,c(" Batal ")]),_:1}),e(g,{type:"primary",onClick:I(R,["prevent"])},{default:a(()=>[We,c(" Simpan ")]),_:1},8,["onClick"])])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])),[[U,M.value]])])]),_:1})}}};export{Sa as default};
