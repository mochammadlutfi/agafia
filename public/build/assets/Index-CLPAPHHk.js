import{r as n,w as ce,a6 as $,p as D,o as y,v as a,n as H,N as pe,ah as me,au as K,al as _e,U as fe,B as o,ad as L,C as e,O as ge,J as v,t as i,K as h,I as ve,L as he,M as be,G as N,H as O,at as we}from"./id-CJBCPnZN.js";import{h as ye}from"./moment-D15uM1gO.js";import{_ as Ee}from"./SelectTalent-DVabwP5L.js";import{a as A,E as G}from"./index-Dcz3070i.js";import{a as ke,E as xe}from"./index-T8mEaCR7.js";import{E as Ve}from"./index-Cipdpfhh.js";import{E as Ce,a as Se}from"./index-De0_rFbO.js";import{E as Te}from"./index-Cq1B7wMM.js";import{E as De}from"./index-Db3XZhCe.js";import{v as Be}from"./directive-DN-DfdBq.js";import{E as Me}from"./index-BTUoLU-3.js";import{E as Pe,a as Ue}from"./index-n1MwXJ3G.js";import{E as Fe}from"./index-D5uI6of-.js";import{E as je,a as Y}from"./index-BCXdwlWq.js";import"./index-BfayRB1v.js";import"./_initCloneObject-CoPmMr1o.js";import"./event-BB_Ol6Sd.js";import"./scroll-jMVa8YAc.js";import"./_baseIteratee-DGFQ_hrb.js";import"./vnode-Cg01VY91.js";import"./typescript-Bp3YSIOJ.js";import"./index-bA4E9Jt8.js";import"./isArrayLikeObject-CgxqoNEs.js";import"./index-C1Kr9KAq.js";import"./validator-CMWrnbVe.js";const ze={__name:"SelectProgram",props:{modelValue:[Number,String],status:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(b,{emit:k}){const c=b,p=n(c.modelValue),w=n([]),f=n(!1),B=async()=>{try{f.value=!0;const r=await K.get(route("admin.training.program.data"),{params:{status:c.status}});r.status===200&&(w.value=r.data)}catch(r){console.error(r)}finally{f.value=!1}};ce(()=>c.modelValue,r=>{p.value=r});const x=r=>{p.value=r,k("update:modelValue",r)};return $(()=>{B()}),(r,V)=>{const d=A,E=G;return y(),D(E,{modelValue:p.value,"onUpdate:modelValue":V[0]||(V[0]=g=>p.value=g),"value-key":"id",class:"w-100",filterable:"",clearable:"",remote:"",onChange:x,autocomplete:"off",loading:f.value,disabled:b.disabled,placeholder:"Pilih"},{default:a(()=>[(y(!0),H(pe,null,me(w.value,g=>(y(),D(d,{key:g.id,label:g.nama,value:g.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])}}},Ie={class:"content"},Le={class:"content-heading d-flex justify-content-between align-items-center"},Ne=o("span",null,"Peserta Training",-1),Oe={class:"space-x-1"},Ye=o("i",{class:"si si-plus me-1"},null,-1),$e={class:"block rounded bordered"},He={class:"block-content py-3"},Ke=o("span",null,[o("i",{class:"fa fa-search"})],-1),Ae={class:"block-content p-0"},Ge=o("i",{class:"fa-solid fa-ellipsis"},null,-1),Je=o("i",{class:"si fa-fw si-eye"},null,-1),Re=o("i",{class:"si fa-fw si-note"},null,-1),qe=o("i",{class:"si fa-fw si-trash"},null,-1),Qe={class:"block-content py-2"},We={class:"my-auto text-xs"},Xe={class:"text-end"},Ze=o("i",{class:"fa fa-close me-2"},null,-1),ea=o("i",{class:"fa fa-check me-2"},null,-1),F=25,Sa={__name:"Index",props:{errors:{type:Object,default:()=>({})}},setup(b){const k=n([]),c=n(!0),p=n(""),w=n(0),f=n(0),B=n(0),x=n(1),r=n(0),V=_.debounce(()=>{c.value=!0,d()},1e3),d=async s=>{try{c.value=!0;const l=await K.get("/admin/training/data",{params:{page:s||1,limit:F,search:p.value}});l.status===200&&(k.value=l.data.data,x.value=l.data.current_page,w.value=l.data.total,r.value=l.data.per_page,f.value=l.data.from,f.to=l.data.to)}catch(l){console.error(l)}finally{c.value=!1}},E=s=>{if(s)return ye(String(s)).format("DD MMM YYYY")},g=s=>{switch(s){case"terdaftar":return"warning";case"sedang_pelatihan":return"info";case"selesai":return"success";default:return"info"}},J=s=>{d()},R=s=>{je.alert("Data yang dihapus tidak bisa dikembalikan!","Peringatan",{showCancelButton:!0,confirmButtonText:"Ya!",cancelButtonText:"Tidak!",type:"warning"}).then(()=>{we.delete(`/admin/training/${s}/delete`,{preserveScroll:!0,onSuccess:()=>{d(),Y({type:"success",message:"Data Berhasil Dihapus!"})}})})},C=n(!1),q=n("Tambah Peserta"),Q=n(!1),j=n(!1),u=_e({id:null,user_id:null,program_id:null,tanggal:null}),W=()=>{C.value=!0},X=()=>{C.value=!1},Z=()=>{let s=Q.value?route("admin.training.update",{id:u.id}):route("admin.training.store");u.post(s,{preserveScroll:!0,onFinish:()=>{j.value=!1,d()},onSuccess:()=>{Y({type:"success",message:"Data Berhasil Disimpan!"}),this.onCloseForm()}})};return $(()=>{d()}),(s,l)=>{const S=ge,M=A,ee=G,T=xe,ae=Ve,z=ke,m=Se,te=Te,P=be,le=he,oe=ve,se=Ce,ne=De,U=Ue,re=Fe,ie=Pe,de=Me,ue=fe("base-layout"),I=Be;return y(),D(ue,null,{default:a(()=>[o("div",Ie,[o("div",Le,[Ne,o("div",Oe,[e(S,{onClick:W,type:"primary"},{default:a(()=>[Ye,v(" Tambah Peserta ")]),_:1})])]),L((y(),H("div",$e,[o("div",He,[e(z,{justify:"space-between"},{default:a(()=>[e(T,{span:12},{default:a(()=>[e(ee,{modelValue:F,"onUpdate:modelValue":l[0]||(l[0]=t=>F=t),placeholder:"Pilih",style:{width:"110px"},onChange:l[1]||(l[1]=t=>d(1))},{default:a(()=>[e(M,{label:"25",value:"25"}),e(M,{label:"50",value:"50"}),e(M,{label:"100",value:"100"})]),_:1})]),_:1}),e(T,{span:7},{default:a(()=>[e(ae,{modelValue:p.value,"onUpdate:modelValue":l[2]||(l[2]=t=>p.value=t),onInput:i(V),clearable:""},{prefix:a(()=>[Ke]),_:1},8,["modelValue","onInput"])]),_:1})]),_:1})]),o("div",Ae,[e(se,{data:k.value,class:"w-100",onSortChange:J,"header-cell-class-name":"bg-body text-dark"},{default:a(()=>[e(m,{type:"index",width:"50"}),e(m,{prop:"talent.nama",label:"Nama",width:"200px",sortable:""}),e(m,{prop:"program.nama",label:"Program",width:"200px",sortable:""}),e(m,{prop:"tanggal_daftar",label:"Tgl Daftar",sortable:""},{default:a(t=>[o("span",null,h(E(t.row.tanggal_daftar)),1)]),_:1}),e(m,{prop:"tanggal_mulai",label:"Tgl Mulai",sortable:""},{default:a(t=>[o("span",null,h(E(t.row.tanggal_mulai)),1)]),_:1}),e(m,{prop:"tanggal_selesai",label:"Tgl Selesai",sortable:""},{default:a(t=>[o("span",null,h(E(t.row.tanggal_selesai)),1)]),_:1}),e(m,{prop:"status",label:"Status",sortable:""},{default:a(t=>[e(te,{type:g(t.row.status),size:"small"},{default:a(()=>[v(h(t.row.status_label),1)]),_:2},1032,["type"])]),_:1}),e(m,{label:"Aksi",align:"center",width:"100px"},{default:a(t=>[e(oe,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:a(()=>[e(le,null,{default:a(()=>[e(P,null,{default:a(()=>[e(i(N),{href:s.route("admin.training.show",{id:t.row.id}),class:"d-flex align-items-center justify-content-between space-x-1"},{default:a(()=>[v(" Detail "),Je]),_:2},1032,["href"])]),_:2},1024),e(P,null,{default:a(()=>[e(i(N),{href:s.route("admin.training.edit",{id:t.row.id}),class:"d-flex align-items-center justify-content-between space-x-1"},{default:a(()=>[v(" Ubah "),Re]),_:2},1032,["href"])]),_:2},1024),e(P,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:O(aa=>R(t.row.id),["prevent"])},{default:a(()=>[v(" Hapus "),qe]),_:2},1032,["onClick"])]),_:2},1024)]),default:a(()=>[e(S,null,{default:a(()=>[Ge]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["data"])]),o("div",Qe,[e(z,{justify:"space-between"},{default:a(()=>[e(T,{lg:12,class:"d-flex"},{default:a(()=>[o("p",We,"Menampilkan "+h(f.value)+" sampai "+h(B.value)+" dari "+h(w.value),1)]),_:1}),e(T,{lg:12,class:"text-end"},{default:a(()=>[e(ne,{class:"float-end",background:"",layout:"prev, pager, next","page-size":r.value,total:w.value,"current-page":x.value,onCurrentChange:d},null,8,["page-size","total","current-page"])]),_:1})]),_:1})])])),[[I,c.value]]),L((y(),D(de,{modelValue:C.value,"onUpdate:modelValue":l[6]||(l[6]=t=>C.value=t),title:q.value,width:"40%","close-on-click-modal":!1,"close-on-press-escape":!1},{default:a(()=>[e(ie,{model:i(u),"label-position":"top"},{default:a(()=>[e(U,{label:"Talent",error:b.errors.user_id},{default:a(()=>[e(Ee,{modelValue:i(u).user_id,"onUpdate:modelValue":l[3]||(l[3]=t=>i(u).user_id=t),status:"medical"},null,8,["modelValue"])]),_:1},8,["error"]),e(U,{label:"Program",error:b.errors.program_id},{default:a(()=>[e(ze,{modelValue:i(u).program_id,"onUpdate:modelValue":l[4]||(l[4]=t=>i(u).program_id=t)},null,8,["modelValue"])]),_:1},8,["error"]),e(U,{label:"Tanggal",error:b.errors.tanggal},{default:a(()=>[e(re,{modelValue:i(u).tanggal,"onUpdate:modelValue":l[5]||(l[5]=t=>i(u).tanggal=t),type:"daterange","range-separator":"Sampai","start-placeholder":"Tangal Mulai","end-placeholder":"Tanggal Selesai",size:s.size},null,8,["modelValue","size"])]),_:1},8,["error"]),o("div",Xe,[e(S,{onClick:X},{default:a(()=>[Ze,v(" Batal ")]),_:1}),e(S,{type:"primary",onClick:O(Z,["prevent"])},{default:a(()=>[ea,v(" Simpan ")]),_:1},8,["onClick"])])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])),[[I,j.value]])])]),_:1})}}};export{Sa as default};
